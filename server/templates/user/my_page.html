{% extends 'base.html' %} {% block content %}

<ul class="nav nav-tabs">
  <li class="nav-item" onclick="change_tab_color(e)">
    <a class="nav-link active" id="my-posts-tab" data-toggle="tab" href="#my-posts">나의 패스</a>
  </li>
  <li class="nav-item" onclick="change_tab_color(e)">
    <a class="nav-link" id="my-likes-tab" data-toggle="tab" href="#my-likes">내가 찜한 패스</a>
  </li>
  <li class="nav-item" onclick="change_tab_color(e)">
    <a class="nav-link" id="my-bookmarks-tab" data-toggle="tab" href="#my-bookmarks">내가 스크랩한 패스</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane fade show active" id="my-posts">
    <div class="post__title">나의 패스</div>
    <div class="post__container">
      {% for post in my_posts %}
      <div class="card__container post-id-{{ post.id }}">
        <div class="card__header">
          <div class="card-author-profile-image"></div>
          <div class="card-title">{{post.title}}</div>
          <div class="card-author">{{post.user}}</div>
        </div>
        <div class="card__body">
          <div class="card-thumbnail">
            {% if post.thumbnail != null and post.image.url != "" %}
            <img src="{{post.thumbnail}}" alt="대체 텍스트" />
            {% endif %}
          </div>
          <div class="card-description">{{post.desc}}</div>
        </div>
        <div class="card__buttons">
          <div class="btn like-btn card-btns"><i class="fa-solid fa-heart"></i></div>
          <div class="btn reply-btn card-btns">
            <i class="fa-solid fa-comment-dots"></i>
          </div>
          <div class="btn share-btn card-btns"><i class="fa-solid fa-share-nodes"></i></div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="tab-pane fade" id="my-likes">
    <div class="post__title">내가 찜한 패스</div>
    <div class="post__container">
      {% for like_post in my_likes %}
      <div class="card__container post-id-{{ post.id }}">
        <div class="card__header">
          <div class="card-author-profile-image"></div>
          <div class="card-title">{{like_post.post.title}}</div>
          <div class="card-author">{{like_post.post.user}}</div>
        </div>
        <div class="card__body">
          <div class="card-thumbnail">
            {% if post.thumbnail != null and post.image.url != "" %}
            <img src="{{post.thumbnail}}" alt="대체 텍스트" />
            {% endif %}
          </div>
          <div class="card-description">{{post.desc}}</div>
        </div>
        <div class="card__buttons">
          <div class="btn like-btn card-btns"><i class="fa-solid fa-heart"></i></div>
          <div class="btn reply-btn card-btns">
            <i class="fa-solid fa-comment-dots"></i>
          </div>
          <div class="btn share-btn card-btns"><i class="fa-solid fa-share-nodes"></i></div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="tab-pane fade" id="my-bookmarks">
    <div class="post__title">내가 스크랩한 패스</div>
    <div class="post__container">
      {% for bm_post in my_bookmarks %}
      <div class="card__container post-id-{{ post.id }}">
        <div class="card__header">
          <div class="card-author-profile-image"></div>
          <div class="card-title">{{bm_post.post.title}}</div>
          <div class="card-author">{{bm_post.post.user}}</div>
        </div>
        <div class="card__body">
          <div class="card-thumbnail">
            {% if post.thumbnail != null and post.image.url != "" %}
            <img src="{{post.thumbnail}}" alt="대체 텍스트" />
            {% endif %}
          </div>
          <div class="card-description">{{post.desc}}</div>
        </div>
        <div class="card__buttons">
          <div class="btn like-btn card-btns"><i class="fa-solid fa-heart"></i></div>
          <div class="btn reply-btn card-btns">
            <i class="fa-solid fa-comment-dots"></i>
          </div>
          <div class="btn share-btn card-btns"><i class="fa-solid fa-share-nodes"></i></div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<script>
  function change_tab_color(e) {
    var taps = document.querySelectorAll(".nav-items");
    taps.forEach(function (tap, i) {
      if(e.currentTarget == tap) {
        tap.classList.add("active");
      } else {
        tap.classList.remove("active");
      }
    });
  }

  // '나의 패스' 탭
  document.getElementById('my-posts-tab').addEventListener('click', function () {
    document.getElementById('my-posts').style.display = 'block';
    document.getElementById('my-likes').style.display = 'none';
    document.getElementById('my-bookmarks').style.display = 'none';
  });

  // '내가 찜한 패스' 탭
  document.getElementById('my-likes-tab').addEventListener('click', function () {
    document.getElementById('my-posts').style.display = 'none';
    document.getElementById('my-likes').style.display = 'block';
    document.getElementById('my-bookmarks').style.display = 'none';
  });

  // '내가 스크랩한 패스' 탭
  document.getElementById('my-bookmarks-tab').addEventListener('click', function () {
    document.getElementById('my-posts').style.display = 'none';
    document.getElementById('my-likes').style.display = 'none';
    document.getElementById('my-bookmarks').style.display = 'block';
  });
</script>

{% endblock %}