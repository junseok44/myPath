{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="detail-container">
    <div class="intro-container">
        <div class="intro-title">
            <h2>{{post.title}}</h2>
            <a href="/">{{post.user}}</a>
        </div>
        <div class="intro-desc">
            <img src="{{post.thumbnail.url}}">
            <p>{{post.desc}}</p>
        </div>
        
    </div>
    <ul class="main-container {{post.mode}}">
        {% for path in paths %}
        <li class="path path_{{path.id}}">
            <p>{{path.title}}</p>
            <div class="step-container">
                {% for step in path.steps %}
                <section class="step step_{{step.id}}">
                    <div>
                        <p class="title">{{step.title}}</p>
                        <p class="desc">{{step.desc}}</p>
                        <button type="button" onclick="onClickStepShow('{{step.id}}')">더보기</button>
                    </div>
                    <div class="modal__overlay hidden">
                        <div class="step__modal modal_{{step.id}} hidden">
                          <!-- 더보기 버튼을 눌렀을때 나오는 모달 -->
                          <h3>{{step.title}}</h3>
                          <img src="{{step.Image.url}}">
                          <p>{{step.desc}}</p>
                          <div class="step__comment">
                            <input type="text" class="new-comment" placeholder="댓글을 입력하세요">
                            <button class="comment-create" onclick="onClickStepComment({{step.id}})">댓글 쓰기</button>
                          </div>
                        </div>
                    </div>
                </section>
                {% endfor %}
            </div>
        </li>    
        {% endfor %}
    </ul>
    <div class="review-container">
        <div class="review-content">{{post.review}}</div>
        <div class="comment-container">
            {% for post_comment in post_comments%}
            <p>{{post_comment.writer}}</p>
            <p>{{post_comment.text}}</p>
            {% endfor %}
        </div>
    </div>
</div>

<script>

    const onClickStepShow=(id)=>{
        const url='/step';
        const step_title=document.querySelector(`.modal_${step.id} h2`);
        const step_image=document.querySelector(`.modal_${step.id} img`);
        const step_desc=document.querySelector(`.modal_${step.id} p`);
    };

    const onClickStepComment=(id)=>{
        const url='step/comment_create';

    };

</script>
{% endblock %}